<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpaceOn - ê°€ë³€í˜• ë§¤ì¥ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        /* [1. ë³´ë‚´ì£¼ì‹  Login.aspx ìŠ¤íƒ€ì¼ ì›ë³¸] */
        body { background-color: #f5f5f5; font-family: 'Malgun Gothic'; margin: 0; }
        
        .screen { display: none; min-height: 100vh; }
        .active { display: block; }

        /* ë¡œê·¸ì¸ ì „ìš© ìŠ¤íƒ€ì¼ */
        .login-wrapper { text-align: center; padding-top: 50px; }
        .login-box { background: white; width: 350px; margin: 0 auto; padding: 40px; border: 1px solid #ddd; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .input-txt { width: 90%; padding: 12px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 14px; box-sizing: border-box; }
        .btn-login { width: 100%; padding: 12px; background-color: #0076BE; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 16px; margin-bottom: 10px; }
        .btn-join { width: 100%; padding: 12px; background-color: #7f8c8d; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 16px; }

        /* [2. ëŒ€ì‹œë³´ë“œ ë° ì—ë””í„° ê³µí†µ ìŠ¤íƒ€ì¼] */
        .header { background: white; padding: 15px 30px; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }
        .header h2 { margin: 0; color: #0076BE; font-size: 20px; }
        
        .main-container { display: flex; padding: 20px; gap: 20px; max-width: 1200px; margin: 0 auto; justify-content: center; }
        .sidebar { width: 320px; background: white; padding: 20px; border-radius: 10px; border: 1px solid #ddd; height: fit-content; text-align: left; }
        .map-area { background: #2c3e50; padding: 30px; border-radius: 10px; border: 1px solid #ddd; min-height: 500px; display: inline-block; }
        .map-area.editor { background: white; } /* ì—ë””í„°ëŠ” í° ë°°ê²½ */

        /* ë²„íŠ¼ë¥˜ */
        .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; color: white; font-weight: bold; font-size: 13px; }
        .btn-blue { background-color: #3498db; }
        .btn-green { background-color: #27ae60; }
        .btn-red { background-color: #e74c3c; }
        .btn-gray { background-color: #7f8c8d; }
        .btn-dash { background-color: #27ae60; color: white; border: none; padding: 8px 15px; border-radius: 4px; margin-left: 10px; cursor:pointer; }

        /* ê·¸ë¦¬ë“œ ë§µ */
        .tbl-map { margin: 0 auto; border-spacing: 10px; border-collapse: separate; }
        .cell-btn { 
            width: 90px; height: 90px; display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: white; font-weight: bold; font-size: 13px; border-radius: 10px; 
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2); cursor: pointer; transition: 0.2s; user-select: none;
        }
        .cell-btn:hover { transform: scale(1.05); }
        .cell-empty { background-color: #ecf0f1; color: #bbb; border: 1px dashed #ccc; box-shadow: none; font-size: 20px; }
        
        /* ìƒíƒœ ìŠ¤íƒ€ì¼ */
        .wall { background-color: #34495e !important; opacity: 0.3; cursor: default !important; box-shadow: none; }
        .occupied { border: 4px solid #e74c3c; animation: pulse 1.5s infinite; }
        .waiting { opacity: 0.9; }

        @keyframes pulse { 0% { border-color: #e74c3c; } 50% { border-color: #c0392b; transform: scale(0.98); } 100% { border-color: #e74c3c; } }

        /* í•„í„° ë° ì…ë ¥ */
        .tag-area { margin-bottom: 20px; text-align: center; }
        .btn-tag { background: white; border: 1px solid #0076BE; color: #0076BE; padding: 6px 15px; border-radius: 20px; margin: 5px; cursor: pointer; }
        .btn-tag.active { background: #0076BE; color: white; font-weight: bold; }
        .highlight { transform: scale(1.1); box-shadow: 0 0 15px #f1c40f; z-index: 10; border: 2px solid #f1c40f; }
        .dimmed { opacity: 0.15; filter: grayscale(100%); pointer-events: none; }

        .input-full { width: 95%; padding: 8px; margin-bottom: 5px; border: 1px solid #ccc; border-radius: 4px; }

        /* ëª¨ë‹¬ (íŒì—…) */
        .modal-bg { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; z-index: 999; }
        .modal-box { background: white; color: black; width: 300px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 30px; border-radius: 10px; text-align: center; }
        .modal-info { text-align: left; background: #f9f9f9; padding: 15px; border-radius: 5px; margin-bottom: 15px; font-size: 13px; line-height: 1.6; }
    </style>
</head>
<body>

    <div id="screen-login" class="screen active login-wrapper">
        <div class="login-box">
            <h2 style="color:#0076BE;">SpaceOn System</h2>
            <p style="color:#666; font-size:14px;">ë§¤ì¥ ê´€ë¦¬ ì‹œìŠ¤í…œì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</p>
            <br />
            <input type="text" id="txtID" class="input-txt" placeholder="ì•„ì´ë””">
            <input type="password" id="txtPW" class="input-txt" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <br /><br />
            <button class="btn-login" onclick="tryLogin()">ë¡œê·¸ì¸</button>
            <button class="btn-join" onclick="alert('ê°€ì… ê¸°ëŠ¥ì€ ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤.')">íšŒì›ê°€ì…</button>
            <br /><br />
            <p id="lblMsg" style="color:red; font-size:13px; min-height:20px;"></p>
            <p style="color:#999; font-size:12px; margin-top:20px;">* ê´€ë¦¬ì: <b>admin</b> / ì‚¬ìš©ì: <b>user</b></p>
        </div>
    </div>

    <div id="screen-admin-dash" class="screen">
        <div class="header">
            <div>
                <h2>ğŸ› ï¸ ê´€ë¦¬ì ìš´ì˜ í˜„í™©íŒ (Admin)</h2>
            </div>
            <div>
                <button class="btn btn-green" onclick="goMapEditor()">ğŸ—ï¸ ë§µ êµ¬ì¡° í¸ì§‘</button>
                <button class="btn btn-gray" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
        <div class="main-container" style="display:block; text-align:center;">
            <div style="margin-bottom:20px; color:white; font-size:18px;">
                í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ë°©: <b style="color:#f1c40f; font-size:24px;" id="lblOccupiedCount">0</b>ê°œ
            </div>
            <div class="map-area">
                <table class="tbl-map" id="adminDashMap"></table>
            </div>
        </div>
    </div>

    <div id="screen-admin-editor" class="screen">
        <div class="header">
            <h2>ğŸ—ï¸ ë§¤ì¥ êµ¬ì¡° í¸ì§‘ ëª¨ë“œ</h2>
            <div>
                <button class="btn btn-blue" onclick="goAdminDash()">ğŸ“Š ìš´ì˜ í˜„í™©íŒìœ¼ë¡œ ì´ë™</button>
                <button class="btn btn-gray" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
        <div class="main-container">
            <div class="sidebar">
                <h4>1. ë§µ í¬ê¸°</h4>
                ê°€ë¡œ <input type="number" id="mapRows" value="5" style="width:40px;"> 
                ì„¸ë¡œ <input type="number" id="mapCols" value="5" style="width:40px;">
                <button class="btn btn-blue" onclick="resizeMap()">ì ìš©</button>
                <hr style="margin:20px 0; border-top:1px dashed #ccc;">
                
                <h4>2. ë°© ì¢…ë¥˜ ê´€ë¦¬</h4>
                <input type="text" id="newTypeName" class="input-full" placeholder="ì´ë¦„ (ì˜ˆ: êµ´ë°©)">
                <input type="number" id="newTypePrice" class="input-full" placeholder="ê°€ê²© (3000)">
                <input type="text" id="newTypeTags" class="input-full" placeholder="#íƒœê·¸ (#ì»¤í”Œ)">
                ìƒ‰ìƒ <input type="color" id="newTypeColor" value="#3498db">
                <button class="btn btn-green" onclick="addRoomType()" style="float:right;">ë“±ë¡</button>
                <div id="typeList" style="margin-top:40px; max-height:200px; overflow-y:auto;"></div>
                
                <hr style="margin:20px 0; border-top:1px dashed #ccc;">
                <h4>3. ë°°ì¹˜ ë„êµ¬</h4>
                <div id="toolList"></div>
            </div>
            <div class="map-area editor">
                <table class="tbl-map" id="editorMap"></table>
            </div>
        </div>
    </div>

    <div id="screen-user" class="screen">
        <div class="header">
            <h2>ğŸ“º SpaceOn ì‚¬ìš©ì í˜„í™©íŒ</h2>
            <div>
                <span id="lblUser" style="margin-right:10px; font-weight:bold;">ì‚¬ìš©ìë‹˜</span>
                <button class="btn btn-gray" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
        <div class="main-container" style="display:block; text-align:center;">
            <div class="tag-area" id="tagButtons"></div>
            <div class="map-area">
                <table class="tbl-map" id="userMap"></table>
            </div>
        </div>
    </div>

    <div id="modal" class="modal-bg">
        <div class="modal-box">
            <h3 id="modalTitle">ë°© ì •ë³´</h3>
            <div id="modalInfo" class="modal-info"></div>
            <div id="modalButtons"></div>
            <button class="btn btn-gray" onclick="closeModal()" style="margin-top:10px;">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        // --- ë°ì´í„° ê´€ë¦¬ (LocalStorage) ---
        const DB = {
            config: { rows: 5, cols: 5 },
            types: [
                { id: 1, name: 'ì§€ìš°ê°œ', price: 0, color: '#ecf0f1', tags: '' },
                { id: 2, name: 'ë²½', price: 0, color: '#34495e', tags: '' }
            ],
            map: [], // {x, y, typeId, status, startTime, ownerId}
            currentUser: ''
        };

        window.onload = function() {
            if(localStorage.getItem('spaceon_data')) {
                const loaded = JSON.parse(localStorage.getItem('spaceon_data'));
                DB.config = loaded.config;
                DB.types = loaded.types;
                DB.map = loaded.map;
            } else {
                initMapData(); // ìµœì´ˆ ì‹¤í–‰ ì‹œ ì´ˆê¸°í™”
            }
            renderTypes(); // ì—ë””í„°ìš© ë¦¬ìŠ¤íŠ¸ ë¯¸ë¦¬ ë Œë”ë§
        };

        function saveData() {
            localStorage.setItem('spaceon_data', JSON.stringify(DB));
        }

        function initMapData() {
            DB.map = [];
            for(let r=0; r<DB.config.rows; r++) {
                for(let c=0; c<DB.config.cols; c++) {
                    DB.map.push({ x:r, y:c, typeId:1, status:'Empty', startTime:null, ownerId:null });
                }
            }
            saveData();
        }

        // --- 1. ë¡œê·¸ì¸ ë¡œì§ ---
        function tryLogin() {
            const id = document.getElementById('txtID').value;
            const pw = document.getElementById('txtPW').value;
            const msg = document.getElementById('lblMsg');

            if(!id) { msg.innerText = "ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”."; return; }
            
            DB.currentUser = id;
            document.getElementById('screen-login').classList.remove('active');
            
            if(id === 'admin') {
                goAdminDash();
            } else {
                document.getElementById('lblUser').innerText = id + "ë‹˜";
                goUserDash();
            }
        }

        function logout() { location.reload(); }

        // --- í™”ë©´ ì „í™˜ ---
        function goAdminDash() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-admin-dash').classList.add('active');
            renderAdminDash();
        }
        function goMapEditor() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-admin-editor').classList.add('active');
            document.getElementById('mapRows').value = DB.config.rows;
            document.getElementById('mapCols').value = DB.config.cols;
            renderEditorMap();
        }
        function goUserDash() {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen-user').classList.add('active');
            renderUserMap();
            renderTags();
        }

        // --- 2. ê´€ë¦¬ì í˜„í™©íŒ (AdminDashboard.aspx ë¡œì§) ---
        function renderAdminDash() {
            const tbl = document.getElementById('adminDashMap');
            tbl.innerHTML = '';
            let occupiedCount = 0;

            for(let r=0; r<DB.config.rows; r++) {
                let tr = document.createElement('tr');
                for(let c=0; c<DB.config.cols; c++) {
                    let td = document.createElement('td');
                    let cell = DB.map.find(d => d.x === r && d.y === c);
                    let type = DB.types.find(t => t.id === cell.typeId);

                    td.className = 'cell-btn';
                    
                    if(type.id === 1) { td.style.visibility = 'hidden'; }
                    else if(type.id === 2) { td.classList.add('wall'); }
                    else {
                        td.style.backgroundColor = type.color;
                        if(cell.status === 'Occupied') {
                            td.innerHTML = `${type.name}<br>(${cell.ownerId})`;
                            td.classList.add('occupied');
                            occupiedCount++;
                        } else {
                            td.innerHTML = type.name;
                            td.style.opacity = 0.6;
                        }
                        td.onclick = () => showAdminRoomInfo(cell, type);
                    }
                    tr.appendChild(td);
                }
                tbl.appendChild(tr);
            }
            document.getElementById('lblOccupiedCount').innerText = occupiedCount;
        }

        function showAdminRoomInfo(cell, type) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const info = document.getElementById('modalInfo');
            const btns = document.getElementById('modalButtons');

            title.innerText = type.name;
            
            if(cell.status === 'Occupied') {
                // C# ë¡œì§: ì‹œê°„ ì°¨ì´ ê³„ì‚°
                const now = Date.now();
                const start = cell.startTime;
                const minutes = Math.floor((now - start) / 60000); // ë°€ë¦¬ì´ˆ -> ë¶„
                const price = Math.floor((type.price / 60) * minutes); // ë¶„ë‹¹ ê°€ê²© ê³„ì‚°

                // ì‹œê°„ í¬ë§·íŒ…
                const dateObj = new Date(start);
                const timeStr = dateObj.getHours() + ":" + (dateObj.getMinutes()<10?'0':'') + dateObj.getMinutes();

                info.innerHTML = `
                    <b>ìƒíƒœ:</b> <span style="color:red">ì‚¬ìš© ì¤‘</span><br>
                    <b>ì‚¬ìš©ì:</b> ${cell.ownerId}<br>
                    <b>ì…ì‹¤ ì‹œê°„:</b> ${timeStr} (${minutes}ë¶„ ê²½ê³¼)<br>
                    <b>í˜„ì¬ ìš”ê¸ˆ:</b> ${price.toLocaleString()}ì›
                `;
                
                // ê°•ì œ í‡´ì‹¤ ë²„íŠ¼
                btns.innerHTML = `<button class="btn btn-red" onclick="forceCheckout(${cell.x}, ${cell.y})">ğŸš¨ ê°•ì œ í‡´ì‹¤ (ì´ˆê¸°í™”)</button>`;
            } else {
                info.innerHTML = `<b>ìƒíƒœ:</b> ëŒ€ê¸° ì¤‘<br><b>ê°€ê²©:</b> ì‹œê°„ë‹¹ ${type.price}ì›`;
                btns.innerHTML = '';
            }
            modal.style.display = 'block';
        }

        function forceCheckout(x, y) {
            if(confirm('ì •ë§ ê°•ì œ í‡´ì‹¤ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\në°ì´í„°ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.')) {
                let cell = DB.map.find(d => d.x === x && d.y === y);
                cell.status = 'Empty';
                cell.startTime = null;
                cell.ownerId = null;
                saveData();
                closeModal();
                renderAdminDash();
            }
        }

        // --- 3. ë§µ ì—ë””í„° ë¡œì§ ---
        function resizeMap() {
            const r = parseInt(document.getElementById('mapRows').value);
            const c = parseInt(document.getElementById('mapCols').value);
            if(confirm('ë§µ í¬ê¸°ë¥¼ ë³€ê²½í•˜ë©´ ë°°ì¹˜ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.')) {
                DB.config.rows = r; DB.config.cols = c;
                initMapData(); renderEditorMap();
            }
        }
        function addRoomType() {
            const name = document.getElementById('newTypeName').value;
            const price = document.getElementById('newTypePrice').value;
            const color = document.getElementById('newTypeColor').value;
            const tags = document.getElementById('newTypeTags').value;
            if(!name) return;
            DB.types.push({ id: Date.now(), name, price, color, tags });
            saveData(); renderTypes();
        }
        function renderTypes() {
            // ì—ë””í„° ì¢Œì¸¡ ë¦¬ìŠ¤íŠ¸ & ë¼ë””ì˜¤ë²„íŠ¼ ë Œë”ë§ (ìƒëµ - ì´ì „ê³¼ ë™ì¼)
            const list = document.getElementById('typeList');
            const tools = document.getElementById('toolList');
            list.innerHTML = ''; tools.innerHTML = '';
            
            DB.types.forEach((t, idx) => {
                if(t.id > 2) {
                    list.innerHTML += `<div style="padding:5px; border-bottom:1px solid #eee;">
                        <span style="color:${t.color}">â– </span> ${t.name} (${t.price}ì›)
                        <button class="btn btn-red" style="padding:2px 5px; font-size:10px; float:right;" onclick="deleteType(${t.id})">ì‚­ì œ</button>
                    </div>`;
                }
                tools.innerHTML += `<div><label><input type="radio" name="tool" value="${t.id}" ${idx===0?'checked':''}> ${t.name}</label></div>`;
            });
        }
        function deleteType(id) {
            DB.types = DB.types.filter(t => t.id !== id);
            DB.map.forEach(c => { if(c.typeId === id) c.typeId = 1; });
            saveData(); renderTypes(); renderEditorMap();
        }
        function renderEditorMap() {
            const tbl = document.getElementById('editorMap');
            tbl.innerHTML = '';
            for(let r=0; r<DB.config.rows; r++) {
                let tr = document.createElement('tr');
                for(let c=0; c<DB.config.cols; c++) {
                    let td = document.createElement('td');
                    let cell = DB.map.find(d => d.x === r && d.y === c);
                    let type = DB.types.find(t => t.id === cell.typeId);
                    td.className = 'cell-btn';
                    if(type.id === 1) { td.classList.add('cell-empty'); td.innerText='+'; }
                    else { td.style.backgroundColor = type.color; td.innerText = type.name; }
                    td.onclick = () => {
                        const tool = document.querySelector('input[name="tool"]:checked');
                        if(tool) { cell.typeId = parseInt(tool.value); cell.status='Empty'; saveData(); renderEditorMap(); }
                    };
                    tr.appendChild(td);
                }
                tbl.appendChild(tr);
            }
        }

        // --- 4. ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ ë¡œì§ ---
        function renderUserMap(filterTag) {
            const tbl = document.getElementById('userMap');
            tbl.innerHTML = '';
            for(let r=0; r<DB.config.rows; r++) {
                let tr = document.createElement('tr');
                for(let c=0; c<DB.config.cols; c++) {
                    let td = document.createElement('td');
                    let cell = DB.map.find(d => d.x === r && d.y === c);
                    let type = DB.types.find(t => t.id === cell.typeId);
                    td.className = 'cell-btn';
                    
                    if(type.id === 1) { td.style.visibility = 'hidden'; }
                    else if(type.id === 2) { td.classList.add('wall'); }
                    else {
                        td.style.backgroundColor = type.color;
                        if(cell.status === 'Occupied') {
                            td.classList.add('occupied');
                            td.innerHTML = type.name + "<br>â›” ì‚¬ìš©ì¤‘";
                        } else {
                            td.classList.add('waiting');
                            td.innerHTML = type.name + "<br>â­• ëŒ€ê¸°";
                        }
                        
                        if(filterTag) {
                            if(type.tags.includes(filterTag)) td.classList.add('highlight');
                            else td.classList.add('dimmed');
                        }
                        td.onclick = () => userClickRoom(cell, type);
                    }
                    tr.appendChild(td);
                }
                tbl.appendChild(tr);
            }
        }

        function userClickRoom(cell, type) {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modalTitle');
            const info = document.getElementById('modalInfo');
            const btns = document.getElementById('modalButtons');
            title.innerText = type.name;

            if(cell.status === 'Empty') {
                info.innerHTML = `ê°€ê²©: ì‹œê°„ë‹¹ ${type.price}ì›<br>ì˜µì…˜: ${type.tags}<br><br>ì…ì‹¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`;
                btns.innerHTML = `<button class="btn btn-blue" onclick="checkIn(${cell.x}, ${cell.y})">ì…ì‹¤í•˜ê¸°</button>`;
            } else {
                if(cell.ownerId === DB.currentUser) {
                    const minutes = Math.floor((Date.now() - cell.startTime) / 60000);
                    const cost = Math.floor((type.price / 60) * Math.max(1, minutes));
                    info.innerHTML = `ì´ìš© ì‹œê°„: ${minutes}ë¶„<br>ê²°ì œ ê¸ˆì•¡: ${cost}ì›<br><br>ê²°ì œí•˜ê³  í‡´ì‹¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`;
                    btns.innerHTML = `<button class="btn btn-red" onclick="checkOut(${cell.x}, ${cell.y})">ê²°ì œ ë° í‡´ì‹¤</button>`;
                } else {
                    info.innerHTML = `ë‹¤ë¥¸ ì†ë‹˜ì´ ì´ìš© ì¤‘ì…ë‹ˆë‹¤.`;
                    btns.innerHTML = '';
                }
            }
            modal.style.display = 'block';
        }

        function checkIn(x, y) {
            let cell = DB.map.find(d => d.x === x && d.y === y);
            cell.status = 'Occupied'; cell.startTime = Date.now(); cell.ownerId = DB.currentUser;
            saveData(); closeModal(); renderUserMap(); alert('ì…ì‹¤ ì™„ë£Œ!');
        }
        function checkOut(x, y) {
            let cell = DB.map.find(d => d.x === x && d.y === y);
            cell.status = 'Empty'; cell.startTime = null; cell.ownerId = null;
            saveData(); closeModal(); renderUserMap(); alert('ê²°ì œ ì™„ë£Œ!');
        }

        function renderTags() {
            const tags = new Set();
            DB.map.forEach(c => { 
                const t = DB.types.find(x => x.id === c.typeId);
                if(t && t.tags) t.tags.split(' ').forEach(tag => { if(tag.startsWith('#')) tags.add(tag); });
            });
            const area = document.getElementById('tagButtons');
            area.innerHTML = `<button class="btn-tag active" onclick="renderUserMap(null)">ì „ì²´ë³´ê¸°</button>`;
            tags.forEach(tag => area.innerHTML += `<button class="btn-tag" onclick="renderUserMap('${tag}')">${tag}</button>`);
        }

        function closeModal() { document.getElementById('modal').style.display = 'none'; }
    </script>
</body>
</html>
